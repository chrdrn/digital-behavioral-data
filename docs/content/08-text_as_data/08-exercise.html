<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Digital behavioral data - Showcase</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../content/09-esm-m_path/09-slides.html" rel="next">
<link href="../../content/08-text_as_data/08-slides.html" rel="prev">
<link href="../../img/logo_fau_red.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<link href="../../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../../site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Showcase</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../img/dbd_hex.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      <div class="sidebar-tools-main tools-wide">
    <a href="https://www.kommunikationswissenschaft.rw.fau.de/lehre/master/digital-behavioral-data/" title="" class="sidebar-tool px-1"><i class="bi bi-globe"></i></a>
    <a href="https://twitter.com/chrdrn" title="" class="sidebar-tool px-1"><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/chrdrn/digital-behavioral-data" title="Course repository" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
    <a href="https://mybinder.org/v2/gh/chrdrn/digital-behavior-data-binder/HEAD" title="Start Binder" class="sidebar-tool px-1"><i class="bi bi-box-arrow-up-right"></i></a>
    <a href="https://github.com/chrdrn/digital-behavior-data-binder" title="Binder repository" class="sidebar-tool px-1"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle sidebar-tool" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">Kick-Off</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/01-kick-off/01-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">Introduction</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/02-dbb-introduction_overview/02-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">Data Collection</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/03-dbd-data_collection/03-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">API Access: Twitter</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/04-api_access-twitter/04-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/04-api_access-twitter/04-exercise.html" class="sidebar-item-text sidebar-link">Showcase</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">API Access: YouTube</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/05-api_access-youtube/05-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/05-api_access-youtube/05-exercise.html" class="sidebar-item-text sidebar-link">Showcase</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">API Access: Reddit</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/06-api_access-reddit/06-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/06-api_access-reddit/06-exercise.html" class="sidebar-item-text sidebar-link">Showcase</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">Webscraping: TikTok</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/07-webscraping-tiktok/07-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/07-webscraping-tiktok/07-exercise.html" class="sidebar-item-text sidebar-link">Showcase</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">Text as data</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/08-text_as_data/08-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/08-text_as_data/08-exercise.html" class="sidebar-item-text sidebar-link active">Showcase</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">ESM: m-Path</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/09-esm-m_path/09-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">Data Donations</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/10-data_donations/10-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">Guest Lecture</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/11-guest_lecture/11-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">B.Y.O.R.P.</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/12-byorp/12-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">Closing Session</a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="false">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../content/13-closing_session/13-slides.html" class="sidebar-item-text sidebar-link">Slides</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background">Background</a></li>
  <li><a href="#scraping" id="toc-scraping" class="nav-link" data-scroll-target="#scraping">Scraping</a>
  <ul>
  <li><a href="#create-function" id="toc-create-function" class="nav-link" data-scroll-target="#create-function">Create function</a></li>
  <li><a href="#define-urls" id="toc-define-urls" class="nav-link" data-scroll-target="#define-urls">Define urls</a></li>
  <li><a href="#scrape-data" id="toc-scrape-data" class="nav-link" data-scroll-target="#scrape-data">Scrape data</a></li>
  <li><a href="#bind-rows" id="toc-bind-rows" class="nav-link" data-scroll-target="#bind-rows">Bind rows</a></li>
  <li><a href="#save-data" id="toc-save-data" class="nav-link" data-scroll-target="#save-data">Save data</a></li>
  </ul></li>
  <li><a href="#data-processing" id="toc-data-processing" class="nav-link" data-scroll-target="#data-processing">Data processing</a>
  <ul>
  <li><a href="#check-language-identification" id="toc-check-language-identification" class="nav-link" data-scroll-target="#check-language-identification">Check language identification</a>
  <ul class="collapse">
  <li><a href="#languages" id="toc-languages" class="nav-link" data-scroll-target="#languages">Languages</a></li>
  <li><a href="#identification-probability" id="toc-identification-probability" class="nav-link" data-scroll-target="#identification-probability">Identification probability</a></li>
  </ul></li>
  <li><a href="#select-only-german-reviews" id="toc-select-only-german-reviews" class="nav-link" data-scroll-target="#select-only-german-reviews">Select only german reviews</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory data analysis</a>
  <ul>
  <li><a href="#number-of-reviews-by-product" id="toc-number-of-reviews-by-product" class="nav-link" data-scroll-target="#number-of-reviews-by-product">Number of reviews by product</a></li>
  <li><a href="#reviews-by-year" id="toc-reviews-by-year" class="nav-link" data-scroll-target="#reviews-by-year">Reviews by year</a></li>
  <li><a href="#ratings-by-product" id="toc-ratings-by-product" class="nav-link" data-scroll-target="#ratings-by-product">Ratings by product</a></li>
  </ul></li>
  <li><a href="#sentiment-analysis" id="toc-sentiment-analysis" class="nav-link" data-scroll-target="#sentiment-analysis">Sentiment analysis</a>
  <ul>
  <li><a href="#create-data-temporary-corpora" id="toc-create-data-temporary-corpora" class="nav-link" data-scroll-target="#create-data-temporary-corpora">Create data (temporary corpora)</a>
  <ul class="collapse">
  <li><a href="#location-parameters" id="toc-location-parameters" class="nav-link" data-scroll-target="#location-parameters">Location parameters</a></li>
  <li><a href="#length-of-reviews-by-source" id="toc-length-of-reviews-by-source" class="nav-link" data-scroll-target="#length-of-reviews-by-source">Length of reviews by source</a></li>
  </ul></li>
  <li><a href="#join-datasets" id="toc-join-datasets" class="nav-link" data-scroll-target="#join-datasets">Join datasets</a></li>
  <li><a href="#polarity-by-product" id="toc-polarity-by-product" class="nav-link" data-scroll-target="#polarity-by-product">Polarity by product</a></li>
  <li><a href="#valence-by-product" id="toc-valence-by-product" class="nav-link" data-scroll-target="#valence-by-product">Valence by product</a></li>
  <li><a href="#ratings-by-categorical-valence" id="toc-ratings-by-categorical-valence" class="nav-link" data-scroll-target="#ratings-by-categorical-valence">Ratings by categorical valence</a></li>
  </ul></li>
  <li><a href="#topic-modeling" id="toc-topic-modeling" class="nav-link" data-scroll-target="#topic-modeling">Topic Modeling</a>
  <ul>
  <li><a href="#preparation" id="toc-preparation" class="nav-link" data-scroll-target="#preparation">Preparation</a>
  <ul class="collapse">
  <li><a href="#text-processing" id="toc-text-processing" class="nav-link" data-scroll-target="#text-processing">Text Processing</a></li>
  <li><a href="#get-top-features-of-dfm" id="toc-get-top-features-of-dfm" class="nav-link" data-scroll-target="#get-top-features-of-dfm">Get top features of dfm</a></li>
  <li><a href="#convert-dfm-to-stm" id="toc-convert-dfm-to-stm" class="nav-link" data-scroll-target="#convert-dfm-to-stm">Convert dfm to stm</a></li>
  </ul></li>
  <li><a href="#choose-topic-number" id="toc-choose-topic-number" class="nav-link" data-scroll-target="#choose-topic-number">Choose topic number</a>
  <ul class="collapse">
  <li><a href="#k-0" id="toc-k-0" class="nav-link" data-scroll-target="#k-0">k = 0</a></li>
  <li><a href="#k-c320" id="toc-k-c320" class="nav-link" data-scroll-target="#k-c320">k = c(3:20)</a></li>
  </ul></li>
  <li><a href="#choose-model" id="toc-choose-model" class="nav-link" data-scroll-target="#choose-model">Choose model</a>
  <ul class="collapse">
  <li><a href="#exclusivity-by-coherence" id="toc-exclusivity-by-coherence" class="nav-link" data-scroll-target="#exclusivity-by-coherence">Exclusivity by Coherence</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#model-understanding" id="toc-model-understanding" class="nav-link" data-scroll-target="#model-understanding">Model understanding</a>
  <ul>
  <li><a href="#select-model" id="toc-select-model" class="nav-link" data-scroll-target="#select-model">Select model</a></li>
  <li><a href="#interpretation" id="toc-interpretation" class="nav-link" data-scroll-target="#interpretation">Interpretation</a>
  <ul class="collapse">
  <li><a href="#highest-prob" id="toc-highest-prob" class="nav-link" data-scroll-target="#highest-prob">Highest Prob</a></li>
  <li><a href="#frex" id="toc-frex" class="nav-link" data-scroll-target="#frex">FREX</a></li>
  <li><a href="#prevalence" id="toc-prevalence" class="nav-link" data-scroll-target="#prevalence">Prevalence</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#topic-analysis" id="toc-topic-analysis" class="nav-link" data-scroll-target="#topic-analysis">Topic Analysis</a>
  <ul>
  <li><a href="#preparation-1" id="toc-preparation-1" class="nav-link" data-scroll-target="#preparation-1">Preparation</a>
  <ul class="collapse">
  <li><a href="#get-gamma-statistics-for-the-documents" id="toc-get-gamma-statistics-for-the-documents" class="nav-link" data-scroll-target="#get-gamma-statistics-for-the-documents">Get gamma statistics for the documents</a></li>
  <li><a href="#join-with-original-data-set" id="toc-join-with-original-data-set" class="nav-link" data-scroll-target="#join-with-original-data-set">Join with original data set</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">Analysis</a>
  <ul class="collapse">
  <li><a href="#topic-over-years" id="toc-topic-over-years" class="nav-link" data-scroll-target="#topic-over-years">Topic over years</a></li>
  <li><a href="#topic-by-product" id="toc-topic-by-product" class="nav-link" data-scroll-target="#topic-by-product">Topic by product</a></li>
  <li><a href="#top-reviews-by-topic" id="toc-top-reviews-by-topic" class="nav-link" data-scroll-target="#top-reviews-by-topic">Top reviews by topic</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/chrdrn/digital-behavioral-data/edit/main/content/08-text_as_data/08-exercise.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/chrdrn/digital-behavioral-data/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Showcase</h1>
<p class="subtitle lead">Focus on ‘Text as data’</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="cell" data-hash="08-exercise_cache/html/Setup local OSF environment_04569d5d9edbbda8fe739d518d43c948">

</div>
<div class="cell" data-hash="08-exercise_cache/html/preparation_4c08ea042735c4d58a30cc369406e16f">

</div>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Open this showcase in other interactive and executable environments:</p>
<p><a href="https://mybinder.org/v2/gh/chrdrn/digital-behavioral-data-binder/HEAD?urlpath=rstudio"><img src="../..\img/badge-binder_rstudio.svg" class="img-fluid" alt="Binder RStudio"></a> <a href="https://mybinder.org/v2/gh/chrdrn/digital-behavioral-data-binder/HEAD"><img src="../..\img/badge-binder_jupyter.svg" class="img-fluid" alt="Binder"></a> <a href="https://colab.research.google.com/github/chrdrn/digital-behavioral-data-binder/blob/main/session_08-showcase_text_as_data.ipynb"><img src="https://colab.research.google.com/assets/colab-badge.svg" class="img-fluid" alt="Google Colab"></a></p>
</div>
</div>
<section id="background" class="level2">
<h2 class="anchored" data-anchor-id="background">Background</h2>
<ul>
<li>Scraping Amazon Reviews with R</li>
</ul>
</section>
<section id="scraping" class="level2">
<h2 class="anchored" data-anchor-id="scraping">Scraping</h2>
<section id="create-function" class="level3">
<h3 class="anchored" data-anchor-id="create-function">Create function</h3>
<p>based on <a href="https://stackoverflow.com/a/70993803">stackoverflow post</a>.</p>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-1_209382b5d8fda31ea5b3b7de79625466">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>scrape_amazon <span class="ot">&lt;-</span> <span class="cf">function</span>(page_num, review_url) {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  url_reviews <span class="ot">&lt;-</span> <span class="fu">paste0</span>(review_url, <span class="st">"&amp;pageNumber="</span>, page_num, <span class="st">"&amp;sortBy=recent"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  doc <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url_reviews)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(doc <span class="sc">%&gt;%</span> <span class="fu">html_elements</span>(<span class="st">"[id^='customer_review']"</span>), <span class="sc">~</span> <span class="fu">data.frame</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">review_title =</span> .x <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">".review-title"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">review_text =</span> .x <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">".review-text-content"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">review_star =</span> .x <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">".review-rating"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> .x <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">".review-date"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>() <span class="sc">%&gt;%</span> <span class="fu">gsub</span>(<span class="st">".*vom "</span>, <span class="st">""</span>, .),</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">author =</span> .x <span class="sc">%&gt;%</span> <span class="fu">html_element</span>(<span class="st">".a-profile-name"</span>) <span class="sc">%&gt;%</span> <span class="fu">html_text2</span>(),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">page =</span> page_num</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    as_tibble <span class="sc">%&gt;%</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>()</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="define-urls" class="level3">
<h3 class="anchored" data-anchor-id="define-urls">Define urls</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-2_46189de729d82b365c45f71a4287a168">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">p01 =</span> <span class="st">"https://www.amazon.de/LINEAVI-Eiwei%C3%9F-Shake-Kombination-Molkeneiwei%C3%9F-laktosefrei/product-reviews/B018IB02AU/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&amp;reviewerType=all_reviews"</span>,</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">p02 =</span> <span class="st">"https://www.amazon.de/Detoxkuren%E2%80%A2-Entw%C3%A4sserung-Entschlackung-Stoffwechsel-entschlacken/product-reviews/B072QW5ZN1/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&amp;reviewerType=all_reviews"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">p03 =</span> <span class="st">"https://www.amazon.de/Saint-Nutrition%C2%AE-KETO-BURN-Appetitz%C3%BCgler/product-reviews/B08B67V8G5/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&amp;reviewerType=all_reviews"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">p04 =</span> <span class="st">"https://www.amazon.de/Yokebe-vegetarisch-Mahlzeitersatz-Gewichtsabnahme-hochwertigen/product-reviews/B08GYZ8LRB/ref=cm_cr_dp_d_show_all_btm?ie=UTF8&amp;reviewerType=all_reviews"</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">p05 =</span> <span class="st">"https://www.amazon.de/Vihado-Liquid-chlorophyll-drops-alfalfa/product-reviews/B093XNC8QH/ref=cm_cr_arp_d_paging_btm_next_2?ie=UTF8&amp;reviewerType=all_reviews"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>p01 (<code>Lineavi</code>): 1.679 Gesamtbewertungen, 782 mit Rezensionen –&gt; 79 pages</li>
<li>p02 (<code>DietySlim</code>): 1.652 Gesamtbewertungen, 268 mit Rezensionen –&gt; 28 pages</li>
<li>p03 (<code>Keto Burn)</code>: 3.341 Gesamtbewertungen, 540 mit Rezensionen –&gt; 55 pages</li>
<li>p04 (<code>Yokebe)</code>: 1.586 Gesamtbewertungen, 156 mit Rezensionen –&gt; 16 pages</li>
<li>p05 (<code>Vihado</code>): 1.335 Gesamtbewertungen, 396 mit Rezensionen –&gt; 40 pages</li>
</ul>
</section>
<section id="scrape-data" class="level3">
<h3 class="anchored" data-anchor-id="scrape-data">Scrape data</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-3_a5259d76ad812e68de39673523a2a2f1">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>amazon <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># p01 </span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">79</span>) {</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">scrape_amazon</span>(<span class="at">page_num =</span> i, <span class="at">review_url =</span> url<span class="sc">$</span>p01)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>raw<span class="sc">$</span>p01[[i]] <span class="ot">&lt;-</span> df</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># p02</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">28</span>) {</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">scrape_amazon</span>(<span class="at">page_num =</span> i, <span class="at">review_url =</span> url<span class="sc">$</span>p02)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>raw<span class="sc">$</span>p02[[i]] <span class="ot">&lt;-</span> df</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># p03</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">55</span>) {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">scrape_amazon</span>(<span class="at">page_num =</span> i, <span class="at">review_url =</span> url<span class="sc">$</span>p03)</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>raw<span class="sc">$</span>p03[[i]] <span class="ot">&lt;-</span> df</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># p04</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>) {</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">scrape_amazon</span>(<span class="at">page_num =</span> i, <span class="at">review_url =</span> url<span class="sc">$</span>p04)</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>raw<span class="sc">$</span>p04[[i]] <span class="ot">&lt;-</span> df</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># p05</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">40</span>) {</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> <span class="fu">scrape_amazon</span>(<span class="at">page_num =</span> i, <span class="at">review_url =</span> url<span class="sc">$</span>p05)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>raw<span class="sc">$</span>p05[[i]] <span class="ot">&lt;-</span> df</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bind-rows" class="level3">
<h3 class="anchored" data-anchor-id="bind-rows">Bind rows</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-4_1961c8bc3da4570cab4698e6b235c833">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>product <span class="ot">&lt;-</span> <span class="fu">names</span>(url)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># bind rows for each product</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> product) {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>data<span class="sc">$</span>raw[[i]] <span class="ot">&lt;-</span> amazon<span class="sc">$</span>raw[[i]] <span class="sc">%&gt;%</span> </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rownames_to_column</span>(<span class="st">"id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(id, as.numeric))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># bind rows of all products</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>full <span class="ot">&lt;-</span> amazon<span class="sc">$</span>data<span class="sc">$</span>raw <span class="sc">%&gt;%</span> </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(<span class="at">.id =</span> <span class="st">"src"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="save-data" class="level3">
<h3 class="anchored" data-anchor-id="save-data">Save data</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-5_19255c4d8b1576620ccafc7d7d0812b6">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  amazon,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">here</span>(<span class="st">"data/08-text_as_data/reviews_only.RDS"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="data-processing" class="level2">
<h2 class="anchored" data-anchor-id="data-processing">Data processing</h2>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-6_23831074e51a3f99fcab6143d8000e4f">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>clean <span class="ot">&lt;-</span> amazon<span class="sc">$</span>data<span class="sc">$</span>full <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># create doc_id</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(., <span class="at">var =</span> <span class="st">"doc_id"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># create unique ids (src_id, doc_id)</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">src_id =</span> id, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="fu">paste</span>(src, <span class="fu">sprintf</span>(<span class="st">"%03d"</span>, id), <span class="at">sep =</span> <span class="st">"_"</span>),</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># convert to factor</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(<span class="fu">c</span>(id, src), as.factor),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(doc_id, as.numeric),</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># review body</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">review_body =</span> <span class="fu">paste</span>(review_title, review_text),</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">body_trimmed =</span> <span class="fu">str_replace_all</span>(review_body, <span class="st">"[</span><span class="sc">\r\n</span><span class="st">]"</span> , <span class="st">""</span>), <span class="co"># delete line breaks</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">lang_detect =</span> fastText<span class="sc">::</span><span class="fu">language_identification</span>(</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>      body_trimmed,</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">system.file</span>(<span class="st">"language_identification/lid.176.ftz"</span>, <span class="at">package =</span> <span class="st">"fastText"</span>)),</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">lang =</span> lang_detect<span class="sc">$</span>iso_lang_1,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">lang_prob =</span> lang_detect<span class="sc">$</span>prob_1,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># edit date variable</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_raw =</span> date,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">date_base =</span> <span class="fu">str_extract</span>(date_raw, <span class="st">"</span><span class="sc">\\</span><span class="st">d{1,2}(.*)</span><span class="sc">\\</span><span class="st">d{1,4}"</span>),</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Change date format to DD.MM.YYYY</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Januar "</span>, <span class="st">"01."</span>),</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Februar "</span>, <span class="st">"02."</span>),</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" März "</span>, <span class="st">"03."</span>),</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" April "</span>, <span class="st">"04."</span>),</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Mai "</span>, <span class="st">"05."</span>),</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Juni "</span>, <span class="st">"06."</span>),</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Juli "</span>, <span class="st">"07."</span>),</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" August "</span>, <span class="st">"08."</span>),</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" September "</span>, <span class="st">"09."</span>),</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Oktober "</span>, <span class="st">"10."</span>),</span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" November "</span>, <span class="st">"11."</span>),</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(date_base, str_replace, <span class="st">" Dezember "</span>, <span class="st">"12."</span>),</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Convert to date</span></span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.Date</span>(date_base, <span class="at">format =</span> <span class="st">"%d.%m.%Y"</span>),</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>    <span class="do">## create date variables</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">year =</span> <span class="fu">as.factor</span>(<span class="fu">year</span>(date)),</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">month =</span> <span class="fu">as.factor</span>(<span class="fu">month</span>(date)),</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">day =</span> <span class="fu">as.factor</span>(<span class="fu">day</span>(date)),</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">rating  =</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(review_star, <span class="st">"</span><span class="sc">\\</span><span class="st">d{1}(?=,)"</span>)) </span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># relcoate variables</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="fu">starts_with</span>(<span class="st">"src"</span>), <span class="at">.after =</span> id) <span class="sc">%&gt;%</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="fu">starts_with</span>(<span class="st">"date"</span>), <span class="at">.after =</span> src_id) <span class="sc">%&gt;%</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(year,month,day, <span class="at">.before =</span> review_title) <span class="sc">%&gt;%</span></span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="fu">starts_with</span>(<span class="st">"lang"</span>), <span class="at">.after =</span> page) <span class="sc">%&gt;%</span> </span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(<span class="fu">starts_with</span>(<span class="st">"review"</span>), <span class="at">.after =</span> lang_prob) <span class="sc">%&gt;%</span></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(review_star, <span class="at">.after =</span> body_trimmed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="check-language-identification" class="level3">
<h3 class="anchored" data-anchor-id="check-language-identification">Check language identification</h3>
<section id="languages" class="level4">
<h4 class="anchored" data-anchor-id="languages">Languages</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-7_d55122a70ad7138ddc8e8dff5a9cb4e6">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>clean <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">frq</span>(lang)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>lang &lt;character&gt; 
# total N=2142 valid N=2142 mean=2.67 sd=1.52

Value |    N | Raw % | Valid % | Cum. %
---------------------------------------
als   |    1 |  0.05 |    0.05 |   0.05
de    | 1736 | 81.05 |   81.05 |  81.09
en    |   57 |  2.66 |    2.66 |  83.75
es    |   39 |  1.82 |    1.82 |  85.57
fr    |    1 |  0.05 |    0.05 |  85.62
it    |  292 | 13.63 |   13.63 |  99.25
nl    |    5 |  0.23 |    0.23 |  99.49
pl    |    1 |  0.05 |    0.05 |  99.53
pt    |    2 |  0.09 |    0.09 |  99.63
sk    |    2 |  0.09 |    0.09 |  99.72
sr    |    3 |  0.14 |    0.14 |  99.86
sv    |    1 |  0.05 |    0.05 |  99.91
tr    |    2 |  0.09 |    0.09 | 100.00
&lt;NA&gt;  |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;</code></pre>
</div>
</div>
</section>
<section id="identification-probability" class="level4">
<h4 class="anchored" data-anchor-id="identification-probability">Identification probability</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-8_66b0f9f62707e7050100b1a0904caf6a">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>clean <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(lang) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">prob =</span> <span class="fu">mean</span>(lang_prob)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 13 × 3
   lang      n  prob
   &lt;chr&gt; &lt;int&gt; &lt;dbl&gt;
 1 als       1 0.861
 2 de     1736 0.979
 3 en       57 0.565
 4 es       39 0.900
 5 fr        1 0.930
 6 it      292 0.963
 7 nl        5 0.566
 8 pl        1 0.999
 9 pt        2 0.687
10 sk        2 0.694
11 sr        3 0.510
12 sv        1 0.482
13 tr        2 0.992</code></pre>
</div>
</div>
</section>
</section>
<section id="select-only-german-reviews" class="level3">
<h3 class="anchored" data-anchor-id="select-only-german-reviews">Select only german reviews</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-9_f453d3a2080248d95c1c181eb3227b67">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de <span class="ot">&lt;-</span> amazon<span class="sc">$</span>data<span class="sc">$</span>clean <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(lang <span class="sc">==</span> <span class="st">"de"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory data analysis</h2>
<section id="number-of-reviews-by-product" class="level3">
<h3 class="anchored" data-anchor-id="number-of-reviews-by-product">Number of reviews by product</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-10_b5629337c963987699c8cd8e8ed51e09">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">frq</span>(src)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>src &lt;categorical&gt; 
# total N=1736 valid N=1736 mean=2.88 sd=1.46

Value |   N | Raw % | Valid % | Cum. %
--------------------------------------
p01   | 438 | 25.23 |   25.23 |  25.23
p02   | 256 | 14.75 |   14.75 |  39.98
p03   | 509 | 29.32 |   29.32 |  69.30
p04   | 143 |  8.24 |    8.24 |  77.53
p05   | 390 | 22.47 |   22.47 | 100.00
&lt;NA&gt;  |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;</code></pre>
</div>
</div>
</section>
<section id="reviews-by-year" class="level3">
<h3 class="anchored" data-anchor-id="reviews-by-year">Reviews by year</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-11_74fc56eccd25caec9f7b3d02a6b972e8">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, <span class="at">fill =</span> src)) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_locuszoom</span>() <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_pubr</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ratings-by-product" class="level3">
<h3 class="anchored" data-anchor-id="ratings-by-product">Ratings by product</h3>
<div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(rating, as.factor)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(src, <span class="at">fill =</span> rating)) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"RdYlGn"</span>) <span class="sc">+</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_pubr</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de <span class="sc">%&gt;%</span> </span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(rating, as.factor)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(src, <span class="at">fill =</span> rating)) <span class="sc">+</span> </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"RdYlGn"</span>) <span class="sc">+</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_pubr</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-hash="08-exercise_cache/html/Rating by product_9e3bf5868fe781c703b4e4e94a3e7c29">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="08-exercise_files/figure-html/Rating by product-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Absolute</figcaption><p></p>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="08-exercise_files/figure-html/Rating by product-2.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption">Relative</figcaption><p></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Rating by product</p>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="sentiment-analysis" class="level2">
<h2 class="anchored" data-anchor-id="sentiment-analysis">Sentiment analysis</h2>
<section id="create-data-temporary-corpora" class="level3">
<h3 class="anchored" data-anchor-id="create-data-temporary-corpora">Create data (temporary corpora)</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-13_e699fccd8a86ff6aba45f89e28e8ebc2">

</div>
<section id="location-parameters" class="level4">
<h4 class="anchored" data-anchor-id="location-parameters">Location parameters</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-14_bd5a4905e86ce7154963c91ce6d0f0be">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>temp<span class="sc">$</span>crps_stats <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(types, tokens, sentences) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">descr</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
## Basic descriptive statistics

       var    type     label    n NA.prc  mean    sd   se md trimmed
     types integer     types 1736      0 41.92 41.83 1.00 31   34.91
    tokens integer    tokens 1736      0 56.16 74.06 1.78 36   42.78
 sentences integer sentences 1736      0  3.56  3.39 0.08  3    2.93
         range iqr skew
   459 (1-460)  37 3.38
 1128 (2-1130)  48 5.56
     37 (1-38)   4 3.39</code></pre>
</div>
</div>
</section>
<section id="length-of-reviews-by-source" class="level4">
<h4 class="anchored" data-anchor-id="length-of-reviews-by-source">Length of reviews by source</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-15_0b55b1becead0e336d89eb04c2922ed9">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add sample size</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>sample_size <span class="ot">&lt;-</span> amazon<span class="sc">$</span>temp<span class="sc">$</span>crps_stats <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(src) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>temp<span class="sc">$</span>crps_stats <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add sample size as label</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(sample_size) <span class="sc">%&gt;%</span> </span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">src_label =</span> <span class="fu">paste0</span>(src, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="st">"(n = "</span>, n, <span class="st">")"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggboxplot</span>(<span class="st">"src_label"</span>, <span class="st">"tokens"</span>, </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"src"</span>, <span class="at">palette =</span> <span class="st">"startrek"</span>,</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">orientation =</span> <span class="st">"horizontal"</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> <span class="st">"Number of tokens"</span>) <span class="sc">+</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="join-datasets" class="level3">
<h3 class="anchored" data-anchor-id="join-datasets">Join datasets</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-16_1ff468274e6fc61fc2780a615a8e21ad">

</div>
</section>
<section id="polarity-by-product" class="level3">
<h3 class="anchored" data-anchor-id="polarity-by-product">Polarity by product</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-17_096c66419550495d9037eaeef2ca5007">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de_senti <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> src, <span class="at">y =</span> polarity)) <span class="sc">+</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> src),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">adjust =</span> .<span class="dv">5</span>, </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> .<span class="dv">6</span>, </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.width =</span> <span class="dv">0</span>, </span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">justification =</span> <span class="sc">-</span>.<span class="dv">3</span>, </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_colour =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> src),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> .<span class="dv">25</span>, </span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.shape =</span> <span class="cn">NA</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> src),</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.3</span>,</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">3</span>,</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_jitter</span>(</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">width =</span> .<span class="dv">1</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">1.2</span>, <span class="cn">NA</span>), <span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_startrek</span>() <span class="sc">+</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_startrek</span>() <span class="sc">+</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_pubr</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="valence-by-product" class="level3">
<h3 class="anchored" data-anchor-id="valence-by-product">Valence by product</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-18_16c2162b8891fc8b3689fc8cef6e7c9c">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de_senti <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> src, <span class="at">y =</span> valence)) <span class="sc">+</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  ggdist<span class="sc">::</span><span class="fu">stat_halfeye</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> src),</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">adjust =</span> .<span class="dv">5</span>, </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> .<span class="dv">6</span>, </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.width =</span> <span class="dv">0</span>, </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">justification =</span> <span class="sc">-</span>.<span class="dv">3</span>, </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">point_colour =</span> <span class="cn">NA</span>) <span class="sc">+</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> src),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> .<span class="dv">25</span>, </span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">outlier.shape =</span> <span class="cn">NA</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">color =</span> src),</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="fl">1.3</span>,</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> .<span class="dv">3</span>,</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_jitter</span>(</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">seed =</span> <span class="dv">1</span>, <span class="at">width =</span> .<span class="dv">1</span></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span> </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="fl">1.2</span>, <span class="cn">NA</span>), <span class="at">clip =</span> <span class="st">"off"</span>) <span class="sc">+</span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_startrek</span>() <span class="sc">+</span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_startrek</span>() <span class="sc">+</span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_pubr</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="ratings-by-categorical-valence" class="level3">
<h3 class="anchored" data-anchor-id="ratings-by-categorical-valence">Ratings by categorical valence</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-19_7cb034eec08ae254a54572ab41a81196">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>de_senti <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flat_table</span>(rating, val_fct)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       val_fct negativ neutral positiv
rating                                
1                  167      40     101
2                   61      11      37
3                   47      14      48
4                   34      10     129
5                  109      16     912</code></pre>
</div>
</div>
</section>
</section>
<section id="topic-modeling" class="level2">
<h2 class="anchored" data-anchor-id="topic-modeling">Topic Modeling</h2>
<section id="preparation" class="level3">
<h3 class="anchored" data-anchor-id="preparation">Preparation</h3>
<section id="text-processing" class="level4">
<h4 class="anchored" data-anchor-id="text-processing">Text Processing</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-20_d51a8337ed809bb58fb87055ddf64296">

</div>
</section>
<section id="get-top-features-of-dfm" class="level4">
<h4 class="anchored" data-anchor-id="get-top-features-of-dfm">Get top features of dfm</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-21_3ea3b2e34a7bb5f4595ade4715627410">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textstat_frequency</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  amazon<span class="sc">$</span>txt<span class="sc">$</span>dfm, <span class="at">n =</span> <span class="dv">50</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       feature frequency rank docfreq group
1          gut       702    1     511   all
2      produkt       609    2     476   all
3    geschmack       516    3     419   all
4     schmeckt       414    4     340   all
5      tropfen       359    5     199   all
6        schon       335    6     280   all
7         dass       328    7     233   all
8        super       296    8     249   all
9         mehr       283    9     223   all
10      wasser       261   10     210   all
11         mal       257   11     199   all
12     wirkung       243   12     195   all
13      leider       232   13     187   all
14         tag       228   14     174   all
15       nehme       226   15     209   all
16       shake       225   16     131   all
17      wochen       219   17     179   all
18        seit       210   18     190   all
19    wirklich       208   19     169   all
20     lineavi       207   20     127   all
21     einfach       192   21     163   all
22       sagen       186   22     171   all
23   empfehlen       181   23     162   all
24      besser       177   24     157   all
25   zufrieden       170   25     155   all
26       tagen       168   26     144   all
27       immer       165   27     145   all
28     kapseln       154   28     116   all
29    abnehmen       151   29     132   all
30  abgenommen       147   30     136   all
31          kg       146   31     109   all
32       woche       146   31     121   all
33      shaker       142   33     104   all
34 chlorophyll       141   34      99   all
35        ganz       136   35     122   all
36       fühle       136   35     127   all
37       finde       133   37     113   all
38       sport       133   37     116   all
39     schnell       133   37     121   all
40      leicht       126   40     116   all
41       hilft       123   41     106   all
42       macht       122   42     108   all
43        satt       119   43      98   all
44   ernährung       119   43     108   all
45        kilo       117   45      89   all
46     weniger       117   45      95   all
47      ersten       111   47      89   all
48       gutes       111   47     102   all
49    bestellt       107   49     102   all
50        zeit       106   50      98   all</code></pre>
</div>
</div>
</section>
<section id="convert-dfm-to-stm" class="level4">
<h4 class="anchored" data-anchor-id="convert-dfm-to-stm">Convert dfm to stm</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-22_ee67859b07f7fa76524a5dc0cb4fe51e">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>dfm <span class="ot">&lt;-</span> <span class="fu">convert</span>(amazon<span class="sc">$</span>txt<span class="sc">$</span>dfm, <span class="at">to =</span> <span class="st">"stm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="choose-topic-number" class="level3">
<h3 class="anchored" data-anchor-id="choose-topic-number">Choose topic number</h3>
<section id="k-0" class="level4">
<h4 class="anchored" data-anchor-id="k-0">k = 0</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-23_33278e727e0fb354b0232ea50d15734b">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">"choose_k_free"</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>nullmdl <span class="ot">&lt;-</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stm</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">documents =</span> dfm_stm<span class="sc">$</span>documents,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">vocab =</span> dfm_stm<span class="sc">$</span>vocab, </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">prevalence =</span><span class="sc">~</span> src,</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> <span class="dv">0</span>, </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">42</span>,</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dfm_stm<span class="sc">$</span>meta,</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">init.type =</span> <span class="st">"Spectral"</span>,</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">FALSE</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span>(<span class="at">log =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-24_5ba0295b6dd34b90180586178fc3100d">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>nullmdl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A topic model with 44 topics, 1730 documents and a 765 word dictionary.</code></pre>
</div>
</div>
</section>
<section id="k-c320" class="level4">
<h4 class="anchored" data-anchor-id="k-c320">k = c(3:20)</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-25_27a08251da2088b13baa263c65fd1fe3">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>topic_range <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span><span class="sc">:</span><span class="dv">20</span>) <span class="co"># set topic range based on consistency statistics</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Plan</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>future<span class="sc">::</span><span class="fu">plan</span>(future<span class="sc">::</span>multisession, <span class="at">workers =</span> <span class="dv">6</span>) <span class="co"># use multiple cores</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit models</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tic</span>(<span class="st">"choose_k_intervall"</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>stm <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">k =</span> topic_range) <span class="sc">%&gt;%</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mdl =</span> furrr<span class="sc">::</span><span class="fu">future_map</span>(k, <span class="sc">~</span>stm<span class="sc">::</span><span class="fu">stm</span>(</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">documents =</span> dfm_stm<span class="sc">$</span>documents,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">vocab =</span> dfm_stm<span class="sc">$</span>vocab, </span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">prevalence =</span><span class="sc">~</span> src,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">K =</span> ., </span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">seed =</span> <span class="dv">42</span>,</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">max.em.its =</span> <span class="dv">1000</span>,</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dfm_stm<span class="sc">$</span>meta,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">init.type =</span> <span class="st">"Spectral"</span>,</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">FALSE</span>),</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">.options =</span> furrr<span class="sc">::</span><span class="fu">furrr_options</span>(<span class="at">seed =</span> <span class="dv">42</span>))</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a><span class="fu">toc</span>(<span class="at">log =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="choose-model" class="level3">
<h3 class="anchored" data-anchor-id="choose-model">Choose model</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-26_0bf2daaab2950758f5f037efb6e99fe2">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create heldout data</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>heldout <span class="ot">&lt;-</span> <span class="fu">make.heldout</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">documents =</span> amazon<span class="sc">$</span>tpm<span class="sc">$</span>dfm<span class="sc">$</span>documents,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocab =</span> amazon<span class="sc">$</span>tpm<span class="sc">$</span>dfm<span class="sc">$</span>vocab,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">seed =</span> <span class="dv">42</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create evaluation</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>model_scores <span class="ot">&lt;-</span> amazon<span class="sc">$</span>tpm<span class="sc">$</span>stm <span class="sc">%&gt;%</span> </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">exclusivity =</span> <span class="fu">map</span>(mdl, exclusivity),</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">semantic_coherence =</span> <span class="fu">map</span>(mdl,semanticCoherence, amazon<span class="sc">$</span>tpm<span class="sc">$</span>dfm<span class="sc">$</span>documents),</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">eval_heldout =</span> <span class="fu">map</span>(mdl, eval.heldout, amazon<span class="sc">$</span>tpm<span class="sc">$</span>heldout<span class="sc">$</span>missing),</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">residual =</span> <span class="fu">map</span>(mdl, checkResiduals, amazon<span class="sc">$</span>tpm<span class="sc">$</span>dfm<span class="sc">$</span>documents),</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">bound =</span>  <span class="fu">map_dbl</span>(mdl, <span class="cf">function</span>(x) <span class="fu">max</span>(x<span class="sc">$</span>convergence<span class="sc">$</span>bound)),</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">lfact =</span> <span class="fu">map_dbl</span>(mdl, <span class="cf">function</span>(x) <span class="fu">lfactorial</span>(x<span class="sc">$</span>settings<span class="sc">$</span>dim<span class="sc">$</span>K)),</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">lbound =</span> bound <span class="sc">+</span> lfact,</span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">iterations =</span> <span class="fu">map_dbl</span>(mdl, <span class="cf">function</span>(x) <span class="fu">length</span>(x<span class="sc">$</span>convergence<span class="sc">$</span>bound)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-27_02e8e1378edd843238ebcca499f70529">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>model_scores <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    k,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Lower bound</span><span class="st">`</span> <span class="ot">=</span> lbound,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Residuals =</span> <span class="fu">map_dbl</span>(residual, <span class="st">"dispersion"</span>),</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Semantic coherence</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(semantic_coherence, mean),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Held-out likelihood</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(eval_heldout, <span class="st">"expected.heldout"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 5
       k `Lower bound` Residuals `Semantic coherence` `Held-out likelihood`
   &lt;int&gt;         &lt;dbl&gt;     &lt;dbl&gt;                &lt;dbl&gt;                 &lt;dbl&gt;
 1     3      -173925.      2.16                -79.2                 -5.77
 2     4      -171930.      2.21                -85.6                 -5.72
 3     5      -171599.      2.18                -87.0                 -5.67
 4     6      -170066.      2.09                -92.3                 -5.53
 5     7      -170113.      2.16                -96.4                 -5.55
 6     8      -169722.      2.16               -102.                  -5.48
 7     9      -169448.      2.06               -101.                  -5.41
 8    10      -168686.      2.07               -103.                  -5.34
 9    11      -168933.      1.98                -97.8                 -5.28
10    12      -168887.      1.91               -108.                  -5.31
11    13      -168528.      1.89               -109.                  -5.29
12    14      -167971.      1.92               -110.                  -5.27
13    15      -167892.      1.75               -114.                  -5.23
14    16      -168070.      1.69               -115.                  -5.22
15    17      -167441.      1.73               -113.                  -5.15
16    18      -167422.      1.65               -116.                  -5.11
17    19      -167440.      1.62               -123.                  -5.12
18    20      -167250.      1.59               -119.                  -5.10</code></pre>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-28_3a215348f830794f7f17dd31d3d10a80">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>model_scores <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transmute</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    k,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Lower bound</span><span class="st">`</span> <span class="ot">=</span> lbound,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Residuals =</span> <span class="fu">map_dbl</span>(residual, <span class="st">"dispersion"</span>),</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Semantic coherence</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(semantic_coherence, mean),</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">`</span><span class="at">Held-out likelihood</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">map_dbl</span>(eval_heldout, <span class="st">"expected.heldout"</span>)) <span class="sc">%&gt;%</span>   </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>k, <span class="at">names_to =</span> <span class="st">"Metric"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(k, Value, <span class="at">color =</span> Metric)) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Metric, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"K (number of topics)"</span>,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Model diagnostics by number of topics"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="exclusivity-by-coherence" class="level4">
<h4 class="anchored" data-anchor-id="exclusivity-by-coherence">Exclusivity by Coherence</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-29_a648ef649a3e3677aca4b1a28fea8766">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>tpm<span class="sc">$</span>model_scores <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(k, exclusivity, semantic_coherence) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(k <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">11</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(exclusivity, semantic_coherence)) <span class="sc">%&gt;%</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">k =</span> <span class="fu">as.factor</span>(k)) <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(semantic_coherence, exclusivity, <span class="at">color =</span> k)) <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Semantic coherence"</span>,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Exclusivity"</span>,</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Comparing exclusivity and semantic coherence"</span>,</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Models with fewer topics have higher semantic coherence for more topics, but lower exclusivity"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="model-understanding" class="level2">
<h2 class="anchored" data-anchor-id="model-understanding">Model understanding</h2>
<section id="select-model" class="level3">
<h3 class="anchored" data-anchor-id="select-model">Select model</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-30_b32c3eca1494a88fd588b6bd05f5ae9c">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl <span class="ot">&lt;-</span> amazon<span class="sc">$</span>tpm<span class="sc">$</span>stm <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(k <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(mdl) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  .[[<span class="dv">1</span>]]</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Get stm statistics</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A topic model with 5 topics, 1730 documents and a 765 word dictionary.</code></pre>
</div>
</div>
</section>
<section id="interpretation" class="level3">
<h3 class="anchored" data-anchor-id="interpretation">Interpretation</h3>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-31_a54f6593c267e7df5ce9654b4358a9fb">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl <span class="sc">%&gt;%</span> <span class="fu">labelTopics</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Topic 1 Top Words:
     Highest Prob: tropfen, geschmack, chlorophyll, wasser, wirkung, schmeckt, schon 
     FREX: tropfen, chlorophyll, glas, grün, farbe, flasche, konnten 
     Lift: alfalfa, dosieren, farbe, frisch, geladen, glas, grüne 
     Score: tropfen, chlorophyll, farbe, grün, geladen, medien, wirkung 
Topic 2 Top Words:
     Highest Prob: produkt, super, nehme, seit, mehr, sagen, wirklich 
     FREX: nehme, gutes, begeistert, seit, wirkt, hilft, überrascht 
     Lift: begeistert, detox, entgiften, entschlacken, gutes, pfirsich, teste 
     Score: produkt, seit, nehme, weiteren, super, gutes, hilft 
Topic 3 Top Words:
     Highest Prob: gut, dass, tag, tagen, ganz, finde, besser 
     FREX: ganz, finde, möchte, produkte, tagen, anfang, wenig 
     Lift: anfang, soweit, generell, produkte, komisch, versucht, möchte 
     Score: gut, generell, finde, dass, ganz, tag, tagen 
Topic 4 Top Words:
     Highest Prob: schmeckt, geschmack, shake, lineavi, shaker, pulver, lecker 
     FREX: shake, lineavi, shaker, pulver, lecker, shakes, almased 
     Lift: anleitung, dosen, ersetzt, aktivkost, almased, classic, diätshake 
     Score: lineavi, shaker, shake, almased, pulver, shakes, milch 
Topic 5 Top Words:
     Highest Prob: schon, wochen, leider, kapseln, abgenommen, sport, abnehmen 
     FREX: kapseln, abgenommen, tabletten, geld, bringt, sport, schlucken 
     Lift: abgenommen, achten, burn, gebracht, gegenteil, geld, geldverschwendung 
     Score: kapseln, tabletten, keto, burn, abgenommen, sport, kilo </code></pre>
</div>
</div>
<section id="highest-prob" class="level4">
<h4 class="anchored" data-anchor-id="highest-prob">Highest Prob</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-32_4173fc75b3ca6eeb9ccf668346c813ba">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl, <span class="at">n =</span> <span class="dv">15</span>)<span class="sc">$</span>prob <span class="sc">%&gt;%</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(., <span class="st">"v"</span>, <span class="st">"topic_"</span>), <span class="at">.cols =</span> v1<span class="sc">:</span>v5) <span class="sc">%&gt;%</span> </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paged_table</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["topic_1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["topic_2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["topic_3"],"name":[3],"type":["chr"],"align":["left"]},{"label":["topic_4"],"name":[4],"type":["chr"],"align":["left"]},{"label":["topic_5"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"tropfen","2":"produkt","3":"gut","4":"schmeckt","5":"schon"},{"1":"geschmack","2":"super","3":"dass","4":"geschmack","5":"wochen"},{"1":"chlorophyll","2":"nehme","3":"tag","4":"shake","5":"leider"},{"1":"wasser","2":"seit","3":"tagen","4":"lineavi","5":"kapseln"},{"1":"wirkung","2":"mehr","3":"ganz","4":"shaker","5":"abgenommen"},{"1":"schmeckt","2":"sagen","3":"finde","4":"pulver","5":"sport"},{"1":"schon","2":"wirklich","3":"besser","4":"lecker","5":"abnehmen"},{"1":"fühle","2":"zufrieden","3":"wasser","4":"shakes","5":"mal"},{"1":"glas","2":"hilft","3":"nehmen","4":"satt","5":"wirkung"},{"1":"gut","2":"leicht","3":"macht","4":"mal","5":"ernährung"},{"1":"fitter","2":"geschmack","3":"geht","4":"immer","5":"empfehlen"},{"1":"einfach","2":"gutes","3":"trinke","4":"schon","5":"kg"},{"1":"flasche","2":"wirkt","3":"wenig","4":"almased","5":"kilo"},{"1":"grün","2":"erst","3":"allerdings","4":"diät","5":"tabletten"},{"1":"immer","2":"körper","3":"möchte","4":"einfach","5":"woche"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-33_598c16811a2dd5e5efb2e063e3bb1649">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl, <span class="at">n =</span> <span class="dv">15</span>)<span class="sc">$</span>prob<span class="sc">%&gt;%</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"topic"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> <span class="fu">paste</span>(v1,v2,v3,v4,v5,v6,v7,v8,v9,v10,</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>                      v11, v12, v13, v14, v15, </span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">"; "</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(topic, prob) <span class="sc">%&gt;%</span> </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> topic </th>
   <th style="text-align:left;"> prob </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 1 </td>
   <td style="text-align:left;"> tropfen; geschmack; chlorophyll; wasser; wirkung; schmeckt; schon; fühle; glas; gut; fitter; einfach; flasche; grün; immer </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> produkt; super; nehme; seit; mehr; sagen; wirklich; zufrieden; hilft; leicht; geschmack; gutes; wirkt; erst; körper </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> gut; dass; tag; tagen; ganz; finde; besser; wasser; nehmen; macht; geht; trinke; wenig; allerdings; möchte </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:left;"> schmeckt; geschmack; shake; lineavi; shaker; pulver; lecker; shakes; satt; mal; immer; schon; almased; diät; einfach </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:left;"> schon; wochen; leider; kapseln; abgenommen; sport; abnehmen; mal; wirkung; ernährung; empfehlen; kg; kilo; tabletten; woche </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="frex" class="level4">
<h4 class="anchored" data-anchor-id="frex">FREX</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-34_e080256484e240c137be1d85b6ce61d8">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl, <span class="at">n =</span><span class="dv">15</span>)<span class="sc">$</span>frex <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">t</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(<span class="at">.fn =</span> <span class="sc">~</span> stringr<span class="sc">::</span><span class="fu">str_replace</span>(., <span class="st">"v"</span>, <span class="st">"topic_"</span>), <span class="at">.cols =</span> v1<span class="sc">:</span>v5) <span class="sc">%&gt;%</span> </span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paged_table</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["topic_1"],"name":[1],"type":["chr"],"align":["left"]},{"label":["topic_2"],"name":[2],"type":["chr"],"align":["left"]},{"label":["topic_3"],"name":[3],"type":["chr"],"align":["left"]},{"label":["topic_4"],"name":[4],"type":["chr"],"align":["left"]},{"label":["topic_5"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"tropfen","2":"nehme","3":"ganz","4":"shake","5":"kapseln"},{"1":"chlorophyll","2":"gutes","3":"finde","4":"lineavi","5":"abgenommen"},{"1":"glas","2":"begeistert","3":"möchte","4":"shaker","5":"tabletten"},{"1":"grün","2":"seit","3":"produkte","4":"pulver","5":"geld"},{"1":"farbe","2":"wirkt","3":"tagen","4":"lecker","5":"bringt"},{"1":"flasche","2":"hilft","3":"anfang","4":"shakes","5":"sport"},{"1":"konnten","2":"überrascht","3":"wenig","4":"almased","5":"schlucken"},{"1":"fitter","2":"helfen","3":"denke","4":"milch","5":"keto"},{"1":"verdauung","2":"kur","3":"kommt","4":"süß","5":"burn"},{"1":"geladen","2":"super","3":"bekommen","4":"yokebe","5":"ernährung"},{"1":"medien","2":"weiterempfehlen","3":"dass","4":"drink","5":"funktioniert"},{"1":"haut","2":"erst","3":"gut","4":"mahlzeiten","5":"gebracht"},{"1":"dosieren","2":"leicht","3":"okay","4":"mahlzeit","5":"verspricht"},{"1":"frisch","2":"einzunehmen","3":"tag","4":"sättigt","5":"kilo"},{"1":"pipette","2":"produkt","3":"versucht","4":"satt","5":"abnehmen"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-35_26b0fb9832ae95bb463f083b946bb2f9">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labelTopics</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl, <span class="at">n =</span><span class="dv">15</span>)<span class="sc">$</span>prob <span class="sc">%&gt;%</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="at">var =</span> <span class="st">"topic"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prob =</span> <span class="fu">paste</span>(v1,v2,v3,v4,v5,v6,v7,v8,v9,v10,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>                      v11, v12, v13, v14, v15, </span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>                      <span class="at">sep =</span> <span class="st">"; "</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(topic, prob) <span class="sc">%&gt;%</span> </span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> topic </th>
   <th style="text-align:left;"> prob </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 1 </td>
   <td style="text-align:left;"> tropfen; geschmack; chlorophyll; wasser; wirkung; schmeckt; schon; fühle; glas; gut; fitter; einfach; flasche; grün; immer </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> produkt; super; nehme; seit; mehr; sagen; wirklich; zufrieden; hilft; leicht; geschmack; gutes; wirkt; erst; körper </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> gut; dass; tag; tagen; ganz; finde; besser; wasser; nehmen; macht; geht; trinke; wenig; allerdings; möchte </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 4 </td>
   <td style="text-align:left;"> schmeckt; geschmack; shake; lineavi; shaker; pulver; lecker; shakes; satt; mal; immer; schon; almased; diät; einfach </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 5 </td>
   <td style="text-align:left;"> schon; wochen; leider; kapseln; abgenommen; sport; abnehmen; mal; wirkung; ernährung; empfehlen; kg; kilo; tabletten; woche </td>
  </tr>
</tbody>
</table>

</div>
</div>
</section>
<section id="prevalence" class="level4">
<h4 class="anchored" data-anchor-id="prevalence">Prevalence</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-36_a971b4352d1e50b7d0eebd125f402782">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>preval <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">terms_beta =</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl <span class="sc">%&gt;%</span> <span class="fu">tidy</span>(),</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">doc_gamma =</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>mdl <span class="sc">%&gt;%</span> <span class="fu">tidy</span>(<span class="st">"gamma"</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>top_terms <span class="ot">&lt;-</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>terms_beta <span class="sc">%&gt;%</span> </span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(., beta) <span class="sc">%&gt;%</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(topic) <span class="sc">%&gt;%</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">top_n</span>(<span class="dv">10</span>, beta) <span class="sc">%&gt;%</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>beta) <span class="sc">%&gt;%</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(topic, term) <span class="sc">%&gt;%</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">terms =</span> <span class="fu">list</span>(term)) <span class="sc">%&gt;%</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">terms =</span> <span class="fu">map</span>(terms, paste, <span class="at">collapse =</span> <span class="st">", "</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="at">cols =</span> <span class="fu">c</span>(terms))</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>top_topics <span class="ot">&lt;-</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>doc_gamma <span class="sc">%&gt;%</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(., topic) <span class="sc">%&gt;%</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">gamma =</span> <span class="fu">mean</span>(gamma)) <span class="sc">%&gt;%</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gamma))</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>tgt <span class="ot">&lt;-</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>top_topics <span class="sc">%&gt;%</span> </span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>top_terms, <span class="at">by =</span> <span class="st">"topic"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">topic =</span> <span class="fu">paste0</span>(<span class="st">"Topic "</span>, topic),</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">topic =</span> <span class="fu">reorder</span>(topic, gamma))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="visual" class="level5">
<h5 class="anchored" data-anchor-id="visual">Visual</h5>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-37_9e421f288070e8577af65f6be61ffa92">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>tgt  <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(topic, gamma, <span class="at">label =</span> terms, <span class="at">fill =</span> topic)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">hjust =</span> <span class="fl">1.1</span>, <span class="at">nudge_y =</span> <span class="fl">0.0005</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.35</span>), <span class="at">labels =</span> scales<span class="sc">::</span>percent) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="fu">expression</span>(gamma)) <span class="sc">+</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_jama</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="topic-analysis" class="level2">
<h2 class="anchored" data-anchor-id="topic-analysis">Topic Analysis</h2>
<section id="preparation-1" class="level3">
<h3 class="anchored" data-anchor-id="preparation-1">Preparation</h3>
<section id="get-gamma-statistics-for-the-documents" class="level4">
<h4 class="anchored" data-anchor-id="get-gamma-statistics-for-the-documents">Get gamma statistics for the documents</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-38_39a76494e1426515698683e0df0ef343">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>stm<span class="sc">$</span>merge <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">doc_gamma_wide =</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>doc_gamma <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(document) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">id_cols =</span> document,</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_from =</span> <span class="st">"topic"</span>, </span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">names_prefix =</span> <span class="st">"gamma_topic_"</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">values_from =</span> <span class="st">"gamma"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">doc_id_gamma =</span> document),</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">doc_gamma_top =</span> amazon<span class="sc">$</span>stm<span class="sc">$</span>preval<span class="sc">$</span>doc_gamma <span class="sc">%&gt;%</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(document) <span class="sc">%&gt;%</span> </span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_max</span>(gamma) <span class="sc">%&gt;%</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">top_topic =</span> topic,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">top_gamma =</span> gamma)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="join-with-original-data-set" class="level4">
<h4 class="anchored" data-anchor-id="join-with-original-data-set">Join with original data set</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-39_ccd972ea38fae8652a8b518e2727f960">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>tpm <span class="ot">&lt;-</span> amazon<span class="sc">$</span>data<span class="sc">$</span>de_senti <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    doc_id <span class="sc">!=</span> <span class="dv">108</span> <span class="sc">&amp;</span> doc_id <span class="sc">!=</span> <span class="dv">790</span> <span class="sc">&amp;</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    doc_id <span class="sc">!=</span> <span class="dv">914</span> <span class="sc">&amp;</span> doc_id<span class="sc">!=</span> <span class="dv">1328</span> <span class="sc">&amp;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    doc_id <span class="sc">!=</span> <span class="dv">1349</span> <span class="sc">&amp;</span> doc_id <span class="sc">!=</span> <span class="dv">1706</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>merge<span class="sc">$</span>doc_gamma_top) <span class="sc">%&gt;%</span> </span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  fastDummies<span class="sc">::</span><span class="fu">dummy_cols</span>(., <span class="at">select_columns =</span> <span class="fu">c</span>(<span class="st">"top_topic"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(amazon<span class="sc">$</span>stm<span class="sc">$</span>merge<span class="sc">$</span>doc_gamma_wide) <span class="sc">%&gt;%</span> </span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>doc_id_gamma) <span class="sc">%&gt;%</span> </span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(top_topic, as.factor))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-40_76d8d2cd949dd5c56ee37e8c90b7a453">

</div>
</section>
</section>
<section id="analysis" class="level3">
<h3 class="anchored" data-anchor-id="analysis">Analysis</h3>
<section id="topic-over-years" class="level4">
<h4 class="anchored" data-anchor-id="topic-over-years">Topic over years</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-41_c501b25883f79435bb9d14d36a10ed31">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>tpm <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(year, <span class="at">fill =</span> top_topic)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_locuszoom</span>() <span class="sc">+</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_pubr</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="08-exercise_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="topic-by-product" class="level4">
<h4 class="anchored" data-anchor-id="topic-by-product">Topic by product</h4>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-42_0c836ce14a8dcc703eb516c09cd42d79">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>amazon<span class="sc">$</span>data<span class="sc">$</span>tpm <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flat_table</span>(top_topic, src)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          src p01 p02 p03 p04 p05
top_topic                        
1               0   8   0   0 372
2               3 164  28   0  14
3               1  10   2   0   0
4             407   0   0 128   0
5              26  72 477  14   4</code></pre>
</div>
</div>
</section>
<section id="top-reviews-by-topic" class="level4">
<h4 class="anchored" data-anchor-id="top-reviews-by-topic">Top reviews by topic</h4>
<section id="preparation-2" class="level5">
<h5 class="anchored" data-anchor-id="preparation-2">Preparation</h5>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-43_0e0266372ac9dd1dc9635df647f7f240">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>top_stories <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>select_topic <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"_"</span>, <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">5</span>, <span class="at">by =</span> <span class="dv">1</span>))</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> select_topic) {</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  i_gamma <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"gamma_topic"</span>, i)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  i_topic <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"top_topic"</span>, i)</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  top_stories[[i_gamma]] <span class="ot">&lt;-</span> </span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    amazon<span class="sc">$</span>data<span class="sc">$</span>tpm[<span class="fu">order</span>(amazon<span class="sc">$</span>data<span class="sc">$</span>tpm[i_gamma], <span class="at">decreasing =</span> <span class="cn">TRUE</span>),] <span class="sc">|&gt;</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(id, date, src, review_title, review_text, review_star,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>           valence, polarity, pol_fct, val_fct,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>           top_gamma, <span class="fu">all_of</span>(i_gamma),</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>           top_topic, <span class="fu">all_of</span>(i_topic), review_body) <span class="sc">|&gt;</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">gamma =</span> <span class="fu">all_of</span>(i_gamma),</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">top_topic_d =</span> <span class="fu">all_of</span>(i_topic)</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>      ) <span class="sc">|&gt;</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dicho</span>(gamma, <span class="at">dich.by =</span> <span class="fl">0.49</span>, <span class="at">suffix =</span> <span class="st">"_d"</span>) <span class="sc">|&gt;</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">across</span>(top_topic_d, as.factor),</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>      <span class="at">gamma_top  =</span> <span class="fu">case_when</span>(top_topic_d <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> gamma, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span>),</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>      <span class="at">gamma_main =</span> <span class="fu">case_when</span>(gamma_d <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> gamma, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_real_</span>),</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">relocate</span>(review_body, <span class="at">.after =</span> top_topic) </span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="create-output" class="level5">
<h5 class="anchored" data-anchor-id="create-output">Create output</h5>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-44_f93a5b1993faae3a5cbf34e8ea13c787">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sjlabelled)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>gamma_topics <span class="ot">&lt;-</span> amazon<span class="sc">$</span>data<span class="sc">$</span>tpm <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">"gamma_topic_"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>()</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> gamma_topics) {</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create dataset</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  output[[i]]<span class="sc">$</span>data <span class="ot">&lt;-</span> top_stories[[i]] <span class="sc">|&gt;</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(top_topic_d <span class="sc">==</span> <span class="dv">1</span>)</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create crosstable</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  <span class="do">## top_topic_d == Dummy: Is i the top topic (== highest relative gamma) of the story</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>  <span class="do">## gamma_d     == Dummy: Is i higher than 0.5 (== highest absolute gamma) of the story</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  output[[i]]<span class="sc">$</span>crosstable <span class="ot">&lt;-</span> top_stories[[i]] <span class="sc">|&gt;</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(top_topic_d, gamma_d) <span class="sc">%&gt;%</span> </span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">across</span>(<span class="fu">everything</span>(), add_labels, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"No"</span> <span class="ot">=</span> <span class="dv">0</span>, <span class="st">"Yes"</span> <span class="ot">=</span> <span class="dv">1</span>)),</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">across</span>(top_topic_d, set_label, <span class="at">label =</span> <span class="st">"Highest realtive gamma"</span>),</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">across</span>(gamma_d, set_label, <span class="at">label =</span> <span class="st">"Highest absolute gamma"</span>)</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">label_to_colnames</span>() <span class="sc">|&gt;</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">flat_table</span>()</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create descriptive statistics: location parameters for different gammas</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>  <span class="do">## gamma_top = only articles where i is the top topic (== highest relative beta)</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>  <span class="do">## gamma_main = only articles where i is the main topic (== highest absolute beta)</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>  output[[i]]<span class="sc">$</span>desc_gamma <span class="ot">&lt;-</span> top_stories[[i]] <span class="sc">|&gt;</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>     <span class="fu">select</span>(gamma_top, gamma_main) <span class="sc">|&gt;</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>     <span class="fu">mutate</span>(</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>       <span class="fu">across</span>(gamma_top, set_label, <span class="at">label =</span> <span class="st">"Highest realtive gamma"</span>),</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>       <span class="fu">across</span>(gamma_main, set_label, <span class="at">label =</span> <span class="st">"Highest absolute gamma"</span>)</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">|&gt;</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>       <span class="fu">descr</span>(<span class="at">show =</span> <span class="fu">c</span>(<span class="st">"label"</span>, <span class="st">"n"</span>, <span class="st">"NA.prc"</span>, <span class="st">"mean"</span>, <span class="st">"sd"</span>, <span class="st">"se"</span>, <span class="st">"md"</span>, <span class="st">"range"</span>))</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a> }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-45_1838b350f0d3e36230cb08b4341bd76e">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>print_output_descriptives <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> x) {</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Headline</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"Results for"</span>, i, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>))</span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Mutli-topic abstracts</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">glue</span>(<span class="st">"## Check for ambiguous topic assignment for review:</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="st">Comments: </span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="st">- Highest relative gamma: Is {i} the top topic of the abstract?</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a><span class="st">- Highest absolute gamma: Is the gamme value for {i} higher than 0.5</span></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="st"> </span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">|&gt;</span> <span class="fu">print</span>()</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Crosstable </span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>   output[[i]]<span class="sc">$</span>crosstable <span class="sc">|&gt;</span> <span class="fu">print</span>()</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Location parameters</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>   output[[i]]<span class="sc">$</span>desc_gamma <span class="sc">|&gt;</span> <span class="fu">print</span>()</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>print_output_abstracts <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Loop</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> x) {</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (j <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)) {</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">glue</span>(<span class="st">"</span></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a><span class="st">           ***************************************************</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a><span class="st">           </span></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a><span class="st">           ID: {output[[i]]$data$id[[j]]} </span><span class="sc">\n</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a><span class="st">           Date: {output[[i]]$data$date[[j]]} </span><span class="sc">\n</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a><span class="st">           Title: {output[[i]]$data$review_title[[j]]} </span><span class="sc">\n</span></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a><span class="st">           Gamma: {round(output[[i]]$data$gamma[[j]],3)} </span><span class="sc">\n</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a><span class="st">           Review: </span><span class="sc">\r</span></span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a><span class="st">           {output[[i]]$data$review_text[[j]]} </span><span class="sc">\n</span></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a><span class="st">           Rating: {output[[i]]$data$review_star[[j]]} </span><span class="sc">\n</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a><span class="st">           Valence: {output[[i]]$data$val_fct[[j]]} ({round(output[[i]]$data$valence[[j]],3)}) </span><span class="sc">\n</span></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a><span class="st">           Polarity: {output[[i]]$data$pol_fct[[j]]} ({round(output[[i]]$data$polarity[[j]],3)}) </span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a><span class="st">           </span><span class="sc">\n\n</span><span class="st">"</span>) <span class="sc">|&gt;</span> <span class="fu">print</span>() </span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="output-by-topics" class="level5">
<h5 class="anchored" data-anchor-id="output-by-topics">Output by topics</h5>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Topic 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Topic 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Topic 3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false">Topic 4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false">Topic 5</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-46_57fe3a1d01e6bfe7e16ab09293425842">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_descriptives</span>(gamma_topics[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Results for gamma_topic_1 
## Check for ambiguous topic assignment for review:
Comments: 
- Highest relative gamma: Is gamma_topic_1 the top topic of the abstract?
- Highest absolute gamma: Is the gamme value for gamma_topic_1 higher than 0.5
 
                       Highest absolute gamma   No  Yes
Highest realtive gamma                                 
No                                            1350    0
Yes                                             93  287

## Basic descriptive statistics

        var                  label   n NA.prc mean   sd se   md
  gamma_top Highest realtive gamma 380  78.03 0.55 0.09  0 0.55
 gamma_main Highest absolute gamma 287  83.41 0.59 0.07  0 0.58
            range
 0.51 (0.27-0.79)
  0.3 (0.49-0.79)</code></pre>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-47_27256d9a14057415fda3a1444c69a66f">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_abstracts</span>(gamma_topics[<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>ID: p05_218</p>
<p>Date: 2021-07-17</p>
<p>Title: Ich liebe dieses Grün!!!</p>
<p>Gamma: 0.788</p>
<p>Review: Die Medien konnten nicht geladen werden. Dass Chlorophyll sehr gesund ist und viele positive Wirkungen hat, ist bekannt. Zumindest in den Kreisen, die sich damit beschäftigen. Grüner Grass-Saft wird als ein wahres Wundermittel angepriesen, nur leider schmeckt er den Wenigsten. Ich kann ihn auch immer nur phasenweise trinken oder mische ihn dann mit Früchten etc. Dauerhaft konnte ich ihn leider noch nicht in mein Leben integrieren. Anders, diese wunderbaren Tropfen. Ich träufle sie morgens in ein Glas Wasser und beobachte erstmal wie sich das intensive Grün verteilt und nach und nach das Wasser einfärbt. Das ist fast wie Meditation für mich, weil es so schön aussieht. Danach trinke ich das Wasser und ja, es schmeckt auch nach Gras, aber nur leicht und es ist überhaupt kein Problem es zu trinken. Ich liebe diese Tropfen. Das wird meine zukünftige Art des Chlorophyll Konsums sein :-)</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.018)</p>
<p>Polarity: positiv (1.099)</p>
<hr>
<p>ID: p05_267</p>
<p>Date: 2021-07-02</p>
<p>Title: Schmecken frisch-grasig</p>
<p>Gamma: 0.764</p>
<p>Review: Ich habe die Tropfen als Produkttester gratis erhalten. Chlorophyll soll mehrere gesundheitliche Vorteile bringen, aber das kann ich nicht bewerten. Die Tropfen haben eine sehr dunkle, bläulich-grüne Farbe. In einem mittelgroßen Glas Wasser schmeckt man den grasigen geschmack kaum raus. Pur schmecken sie auch nicht schlimm.</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: negativ (-0.046)</p>
<p>Polarity: neutral (0)</p>
<hr>
<p>ID: p05_237</p>
<p>Date: 2021-07-11</p>
<p>Title: Schnelle Lieferung, geschmacklich sehr gut</p>
<p>Gamma: 0.76</p>
<p>Review: Die Lieferung war sehr schnell. Die Amwendung ist sehr einfach. 20 Tropfen In ein Glas Wasser und trinken. Geschmacklich sehr gut und lässt sich daher problemlos einnehmen. Die Farbe ist ein intensives grün.</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.124)</p>
<p>Polarity: positiv (2.833)</p>
<hr>
<p>ID: p05_205</p>
<p>Date: 2021-07-22</p>
<p>Title: Fühlt sich gut an!</p>
<p>Gamma: 0.757</p>
<p>Review: Die Medien konnten nicht geladen werden. Der erste Eindruck der Flasche ist schon positiv: zum Schutz vor Licht/Sonnenstrahlung ist die Flasche aus braunen Glas gefertiggt; und zwar aus schönem dunklem braunen Glas, so dass der Füllungsgrad so grade noch erkennbar, dafür die Schutzwirkung umso besser ist. Und die Pipette ist stabil und gut dosierbar. Geruch und Geschmack sind so, wie ich mir den Geschmack von Chlorophyll vorstelle: riecht und schmeckt sehr dezent nach frischem zwischen den Fingern zerriebenen Gras. Farbe ist wunderbar tief-grün, verteilt sich gut im Wasser und lässt sich von daher sehr gut trinken. Ich habe es mir zur Angewohnheit gemacht, morgens auf nüchteren Magen ein Glas Wasser mit der empfohlenen Menge von 20 Tropfen zu trinken (d.h. eine Flasche hält dann ca. 2 bis 2,5 Monate). Den ersten Monat habe ich jetzt fast rum. Ich habe vorher schon ziemlich gesund gelebt … nun ist eine weitere kleine Steigerung spürbar: Verdauung/Stuhl fühlt sich noch besser an, als vorher, und fitter/vitaler fühle ich mich auch. Werde von daher die Tropfen aufbrauchen und eine weitere Flasche anschaffen. Sollten sich weitere Verbesserungen oder ggfs. Verschlechterungen ergeben, werde ich dies hier kommentieren.</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.09)</p>
<p>Polarity: positiv (1.551)</p>
<hr>
<p>ID: p05_091</p>
<p>Date: 2022-01-13</p>
<p>Title: Natur in einer Flasche.</p>
<p>Gamma: 0.755</p>
<p>Review: Die Medien konnten nicht geladen werden. Es schmeckt nach fast gar nichts und riecht bisschen nach Wald. Man spûrt nach dem Trinken mit bisschen kalten Wasser eine sehr intensive Erfrischung. Kann ich jedem empfehlen</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: negativ (-0.001)</p>
<p>Polarity: positiv (0.511)</p>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-48_eea1794539dd755b9ee9bac5bb4b1096">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_descriptives</span>(gamma_topics[<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Results for gamma_topic_2 
## Check for ambiguous topic assignment for review:
Comments: 
- Highest relative gamma: Is gamma_topic_2 the top topic of the abstract?
- Highest absolute gamma: Is the gamme value for gamma_topic_2 higher than 0.5
 
                       Highest absolute gamma   No  Yes
Highest realtive gamma                                 
No                                            1521    0
Yes                                            200    9

## Basic descriptive statistics

        var                  label   n NA.prc mean   sd   se   md
  gamma_top Highest realtive gamma 209  87.92 0.38 0.07 0.00 0.37
 gamma_main Highest absolute gamma   9  99.48 0.53 0.04 0.01 0.51
            range
 0.37 (0.24-0.61)
 0.12 (0.49-0.61)</code></pre>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-49_1a5ec64a2e1a8f7ce2ad21504184db50">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_abstracts</span>(gamma_topics[<span class="dv">2</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>ID: p03_515</p>
<p>Date: 2020-08-24</p>
<p>Title: Super</p>
<p>Gamma: 0.61</p>
<p>Review: Ich nutze das Produkt aktuell seit 10 Tagen und bin vollends zufrieden. Der Geschmack ist sehr angenehm, so fällt ein die Einnahme einfacher.Werde das Produkt auf jeden Fall weiterempfehlen!</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.267)</p>
<p>Polarity: positiv (2.565)</p>
<hr>
<p>ID: p03_522</p>
<p>Date: 2020-08-17</p>
<p>Title: gutes Produkt , der Effekt ist Spürbar</p>
<p>Gamma: 0.584</p>
<p>Review: Ich habe dieses Produkt bestellt da ich momentan verschiedene Fat Burner teste und ähnlich wie bei dem anderen Produkt was ich 30 Tage verwendet habe ist die Wirkung auf leerem Magen stark zu spüren. Verstärktes schwitzen und aufgedreht sein gehört bei Fat burnern für mich dazu , da es eine ankurbelnde Wirkung auf den Metabolismus hat. Gutes Produkt :) Geschmack ist Neutral wie es sein muss.</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.145)</p>
<p>Polarity: positiv (1.099)</p>
<hr>
<p>ID: p03_330</p>
<p>Date: 2021-02-12</p>
<p>Title: Mein Begleiter in der Keto-Diät</p>
<p>Gamma: 0.566</p>
<p>Review: Ich beschäftige mich nun bereits eine Weile mit dem Ketogenen-Lifestyle und bin auf dieses Produkt gestoßen. Dieses nehme ich nun bereits paar Tage zu mir und merke spürbar, wie es meine Fettverbrennung steigert. Würde raten, dazu genügend Wasser zu trinken da man schon merklich mehr ins Schwitzen kommt. Kaufempfehlung!</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.037)</p>
<p>Polarity: positiv (1.946)</p>
<hr>
<p>ID: p03_270</p>
<p>Date: 2021-04-21</p>
<p>Title: Ab der ersten Tablette wirksam</p>
<p>Gamma: 0.526</p>
<p>Review: Ab der ersten Tablette hatte ich irgendwie schon kaum mehr ein Hungergefühl, Heißhunger, süßkram usw) auch ist mir aufgefallen das ich viel schneller satt bin als vorher 5 volle Sterne….</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.159)</p>
<p>Polarity: positiv (1.946)</p>
<hr>
<p>ID: p03_466</p>
<p>Date: 2020-09-29</p>
<p>Title: Empfehlungswert</p>
<p>Gamma: 0.511</p>
<p>Review: Ich empfehle dieses Produkt weiter, da ich es seit Paar Tage benutze, und es wirkt wirklich sehr gut .</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.372)</p>
<p>Polarity: positiv (1.099)</p>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-50_257950cc9a24a0ac2895303ea8448513">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_descriptives</span>(gamma_topics[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Results for gamma_topic_3 
## Check for ambiguous topic assignment for review:
Comments: 
- Highest relative gamma: Is gamma_topic_3 the top topic of the abstract?
- Highest absolute gamma: Is the gamme value for gamma_topic_3 higher than 0.5
 
                       Highest absolute gamma   No  Yes
Highest realtive gamma                                 
No                                            1717    0
Yes                                             13    0

## Basic descriptive statistics

        var                  label  n NA.prc mean   sd   se   md
  gamma_top Highest realtive gamma 13  99.25 0.32 0.07 0.02 0.29
 gamma_main Highest absolute gamma  0 100.00  NaN   NA   NA   NA
           range
 0.2 (0.26-0.46)
 -Inf (Inf--Inf)</code></pre>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-51_92a585b87f80b6729a4f691d7c718ad9">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_abstracts</span>(gamma_topics[<span class="dv">3</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>ID: p03_055</p>
<p>Date: 2022-02-11</p>
<p>Title: Gewöhnungseffekt</p>
<p>Gamma: 0.458</p>
<p>Review: Nach ein paar Tagen gewöhnt man sich an die Kapseln/ der Körper. Einen ” Leistungs Abfall”, merke ich Mittags nicht mehr ganz so stark, je nach Tag. Abgenommen habe ich nicht. Ernähre mich überwiegend ausgewogen, jeden Tag Obst und Gemüse, ja auch mal was Süsses ( dies in Maßen, nicht in Massen). Der Effekt könnte funktionieren mich noch etwas positiver ausfallen, bzgl des abnehmens. Sport betreibe ich wenig, dafür täglich. Dafür laufe ich täglich mehrfach die Treppen in unserem Haus hoch u runter etc</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: negativ (-0.022)</p>
<p>Polarity: positiv (0.588)</p>
<hr>
<p>ID: p01_134</p>
<p>Date: 2018-05-02</p>
<p>Title: Ja ich habe abgenommen…</p>
<p>Gamma: 0.426</p>
<p>Review: Nach zwei Geburten und Stress durch Arbeit sowie Trennung von meinem Mann hatte ich mit 1,58 m mittlerweile 70 kg gewogen (hatte sehr viel ohne nachzudenken in mich reingefuttert, vorher war ich bei 55 kg) und fand mich absolut nicht schön und unwohl. Da bin ich auf die Suche nach einem Unterstützer für den Anfang einer Diät gewesen und nach lesen vieler Rezensionen verschiedenster Produkte bei LINEAVI gelandet (3-er Pack). Ich starte voller Tatendrang mit der Turbo-Diät. Ich habe mich strickt dran gehalten und auch nur Wasser dazu getrunken und Gemüsebrühe gegessen. Allerdings hatte ich am dritten Tag mit dem Kreislauf zu tun und Kopfschmerzen, so dass ich sofort auf die 2er-Dosis pro Tag wechselte und täglich eine normale Mahlzeit zu mir nahm. Da ich noch nicht genau wusste, was darf ich in welchem Maße essen, lud ich mir zusätzlich eine App herunter, womit ich meine Werte, hauptsächlich die Kalorien, gut überwachen kann (das mache ich jetzt auch weiter). Da ich eher von der 3-Shakes-Variante gewechselt habe zur 2-Shakes-Varinate habe ich diese bis zum Tag 12 durchgezogen, danach täglich ein Shake. Allerdings muss ich sagen, obwohl ich nie mehr als die vorgeschriebenen Löffel genommen habe, reicht die Portion bei mir nur für 28 Mahlzeiten (ich habe auch keine Berge auf den Löffel gegeben). Allerdings muss ich ganz ehrlich gestehen, ich habe sehr schnell ein Hungergefühl bzw. Magenknurren bekommen, manchmal schon nach einer halben Stunde, manchmal nach zwei (man muss schon ganz schön sein Ziel wollen, um nicht nachzugeben). Ich habe es versucht mit viel Wasser und Tee zu stillen, aber das ist mir nicht recht gelungen, das Knurren blieb. Aber ich habe nicht nachgegeben. Vom Geschmack her muss ich sagen, am Anfang habe ich den Shake mit Sonnenblumenöl angerüht. Das ging gar nicht. Dann habe ich mir Walnussöl besorgt und damit ging es vom Geschmack. Es schmeckt etwas wie roher Kuchenteig, naja muss man mögen. Bisschen ungewohnt ist die Konsistenz. So und jetzt kommt das Ergebnis: Ja ich habe abgenommen, genau genommen 4 kg in bisschen über 14 Tagen, da ich ja den Anfang gestreckt habe. Das finde ich persönlich schön. Allerdings werde ich jetzt nicht weiter das LINEAVI nehmen sondern lieber auf gesunde Ernährung umsteigen und dies mit meiner App überwachen, da diese Trinks doch nicht ganz meins sind. Allerdings für den Einstieg war es für mich sehr gut, aber nichts auf Dauer. Empfehlen kann ich es auf jeden Fall, aber ich bin der Meinung, man muss stark sein um durchzuhalten. Der Shaker der dabei war, ist sehr praktisch und ohne Probleme zu verwenden, fast immer hat sich bei mir alles aufgelöst. Falls ich, was ich jetzt nicht hoffe, wieder einmal mehr Kilos habe als gewünscht, würde ich dieses Produkt zum Einstieg auch verwenden.</p>
<p>Rating: 4,0 von 5 Sternen</p>
<p>Valence: positiv (0.065)</p>
<p>Polarity: positiv (1.017)</p>
<hr>
<p>ID: p03_237</p>
<p>Date: 2021-05-28</p>
<p>Title: Oke</p>
<p>Gamma: 0.425</p>
<p>Review: Ich hab’s für eine Freundin gekauft und ich gehe jetzt einfach mal ihre Bewertung ab sie hat mir erzählt dass sie nicht mehr so viel Hunger hat und so aber man wird dadurch nicht Döner Mann nimmt nicht ab es passiert gar nichts meiner Meinung nach ist es eine Verschwendung des Geld dafür auszugeben allerdings wenn du fress Attacken hast und Ernährungsergänzungsmittel brauchst ist es gut aber dann kannst du dir auch im DM für 4,59 € ein Ernährungsergänzungsmittel kaufen das meiner Meinung nach genauso gut ist</p>
<p>Rating: 3,0 von 5 Sternen</p>
<p>Valence: negativ (-0.02)</p>
<p>Polarity: neutral (0)</p>
<hr>
<p>ID: p02_216</p>
<p>Date: 2020-06-19</p>
<p>Title: Hilft bei mir super gegen Blähbauch und Cellulite</p>
<p>Gamma: 0.359</p>
<p>Review: Ich bin jetzt in der 3. Woche und habe eine Flasche leergetrunken bzw. die zweite jetzt angefangen.Hier mein Zwischenbericht:Gekauft hatte ich Dietyslim nach dem Motto: klingt nicht schlecht.. mal gucken, ob’s was taugt.Dank dieser Larifari-Einstellung habe ich leider keine Fotos gemacht, mit denen ich die tollen Ergebnisse jetzt hätte vorzeigen können. Denn es gibt zwei auffallende Merkmale seit der Einnahme: die Cellulite an den Beinen und Po ist fast komplett weg und mein Blähbauch ist deutlich reduziert. Es ist nicht so, dass ich extreme Cellulite hatte, aber es gab halt trotzdem unschöne Dellen hier und da, die nun fast vollständig (!) verschwunden sind. Ich glaube, ich hatte das letzte Mal solche glatten und makellosen Beine in meiner Jugend (bin jetzt 47).Mein Blähbauch, der einem 6.Monat-Schwangerschaftsbauch Konkurrenz machte, ist deutlich kleiner geworden. Laut der Inhaltsangabe helfen Papayas bei Blähungen und Verdauungsbeschwerden. Dank dieser Info werde ich dann Papaya-Enzym-Kapseln nochmal extra kaufen, um meinen Blähbauch weiter gezielt zu minimieren.Es tut sich also was in meinem Körper; über weitere Wirkungen kann ich noch nicht berichten. Dass ich jetzt öfters auf Toilette muss, kann ich nicht behaupten. Meine Ernährung habe ich nicht umgestellt. Wie sicher viele andere versuche ich möglichst gesund zu essen, das klappt mehr und mehr weniger gut gut. Abgenommen habe ich minimal, die Hose sitzt etwas lockerer, ich schätze mal, dass es 1-2 kg weniger sind.Den Geschmack fand ich am Anfang nicht so prickelnd. Ich mixe mir das ganze wie folgt: eine große Tasse (Kaffeebecher) zur Hälfte mit kalten Wasser, ein halbes Schnapsglas Dietyslim rein und dann heißes Wasser aufgießen. Schmeckt dann also wie warmer Eistee. Meistens eine Tasse am Morgen und manchmal noch eine Tasse abends.Weil das ganze geschmacklich eine Eisteesorte wäre, die mir nicht so sehr schmeckt, habe ich anfangs echten Eistee, den ich lecker finde, dazugemixt. So ließ sich das ganze ganz gut trinken. Später habe ich den richtigen Eistee wieder nach und nach weggelassen, so dass ich jetzt nur noch Dietyslim (wie am Anfang) pur mit Wasser trinke, aber ich habe mich an den Geschmack gewöhnt habe und finde ihn nicht mehr schlimm.Wer sich gar nicht an den Geschmack gewöhnen kann, dem empfehle ich wirklich, einen Saft der Wahl etwas dazuzumixen.Sollten noch Veränderungen eintreten, werde ich diese Rezession ergänzen.Für mich hat sich Dietyslim definitiv gelohnt.</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.098)</p>
<p>Polarity: positiv (1.099)</p>
<hr>
<p>ID: p02_007</p>
<p>Date: 2022-11-14</p>
<p>Title: Es geht so</p>
<p>Gamma: 0.301</p>
<p>Review: Also das Produkt ist wenn man entwässern möchte sehr gut . Bei mir hat es extrem gewirkt musst soviel auf Toilette. Effekt sicherluch ganz gut. Geschmacklich nicht mein Ding könnte man verbessern und ansonsten gab es keine Abnehmerfolge dadurch zum entgiften vielleicht ok</p>
<p>Rating: 3,0 von 5 Sternen</p>
<p>Valence: positiv (0.249)</p>
<p>Polarity: positiv (1.946)</p>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-52_06b0d9928d58d8845f65476caf96f739">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_descriptives</span>(gamma_topics[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Results for gamma_topic_4 
## Check for ambiguous topic assignment for review:
Comments: 
- Highest relative gamma: Is gamma_topic_4 the top topic of the abstract?
- Highest absolute gamma: Is the gamme value for gamma_topic_4 higher than 0.5
 
                       Highest absolute gamma   No  Yes
Highest realtive gamma                                 
No                                            1195    0
Yes                                            181  354

## Basic descriptive statistics

        var                  label   n NA.prc mean   sd se   md           range
  gamma_top Highest realtive gamma 535  69.08 0.54 0.10  0 0.54 0.49 (0.3-0.79)
 gamma_main Highest absolute gamma 354  79.54 0.60 0.06  0 0.59 0.3 (0.49-0.79)</code></pre>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-53_30112e6f8d32982d107c774c849cfc59">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_abstracts</span>(gamma_topics[<span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>ID: p01_390</p>
<p>Date: 2016-06-09</p>
<p>Title: Lineavi - Die neue Wunderformel?</p>
<p>Gamma: 0.794</p>
<p>Review: Im Verlauf der letzten 10 Jahre gelang es mir wiederholt, mein Gewicht unter Zurhilfenahme diverser “Schlankpülverchen” um ca. 10-15kg zu reduzieren. Da ich es jedoch bis heute nicht hinbekomme, mein “Traumgewicht” zu halten, kann sich die Industrie auch weiterhin über einen getreuen Abnehmer -im doppelten Wortsinn- freuen ;o). Um so schöner also, dass auch an der Eiweisspulverfront für reichlich Abwechslung gesorgt ist. Nach Slimfast, Layenberger und Almased nun also Lineavi.Was ist anders?Nun - zum einen wäre da einmal der Geschmack. Da bei diesem Produkt auf die Zugabe von diversen Geschmacksstoffen wie Erdbeere, Aprikose u.s.w. verzichtet wurde, schmeckt Lineavi einfach anders. Eigentlich ein völlig neuer Geschmack, der aber auch zugegebenermaßen polarisiert. Am ehesten vergleichbar mit Almased; nur etwas süßer. Zudem ist die dezente Note von Erbsen deutlich schmeckbar. Überhaupt sind m.E. Parallelen zu Almased durchaus erkennbar. Ähnliche Bestandteile, ähnliche Konzistenz nach der Zubereitung, u.s.w.. Auch haben beide Produkte unter dem Strich etwa den gleichen Brennwert (340/378 kcal), Lineavi sättigt m.E. aber auf Grund des relativ hohen Kohlenhydratgehalts (23,4g/100g) gefühlt etwas nachhaltiger.Wirkt es?Die Frage habe ich im Grunde ja eingangs bereits beantwortet: Ja, wenn man es sinvoll anwendet, kann man ohne große Mühe etwa 1kg pro Woche abnehmen. Das ist Fakt. Dies klappt zugegebenermaßen aber nicht nur mit Lineavi. Mit etwas Disziplin, Bewegung (muß kein Leistungssport sein, ich selbst bin ein absoluter Bewegungsmuffel), ist das wirklich kein Problem)Wem kann man Lineavi denn nun empfehlen?Grob gesagt jedem, der wärend einer Diät einen geeigneten Sattmacher zur Unterstützung benötigt und seinen Körper in dieser Phase mit zusätzlichen Mineralstoffen und Vitaminen versorgen möchte; ohne diesen dabei unnötigerweise eine unüberschaubare Menge an Geschmacks-, Aroma- und Süßstoffen zu zuführen. Hier kann Lineavi ohne Frage punkten. Im Rahmen einer LowCarb Diät erscheinen mir 23,4g Zucker pro 100g allerdings nicht so ganz zielführend.Werde ich es weiterhin verwenden?Ja, das werde ich ganz sicher. Zum einen weil’s mir schmeckt, zum anderen weil es mich doch über einen Zeitraum von 4-5 Stunden sättigt. Und obwohl, um die eingangs gestellte Frage zu beantworten, mit Lineavi das Rad sicher nicht neu erfunden wurde, ist es dennoch eine willkommene Abwechslung zu den üblichen Verdächtigen.</p>
<p>Rating: 4,0 von 5 Sternen</p>
<p>Valence: positiv (0.075)</p>
<p>Polarity: positiv (1.196)</p>
<hr>
<p>ID: p01_438</p>
<p>Date: 2016-03-08</p>
<p>Title: Süß, aber sättigt</p>
<p>Gamma: 0.771</p>
<p>Review: DIE REZENSION BEZIEHT SICH AUF: Lineavi Vitalkost – Der gesunde Diät Shake für Ihr Abnehmprogramm + Shaker, 500g (Starterpaket)Rezension eines kostenfreien Testartikels.===FAZIT===Die Mahlzeiten sind ausgewogen und versorgen den Körper mit allen Nährstoffen, Vitaminen und Spurenelementen. Das Beste ist, er macht wirklich anhaltend satt.Die Zusammensetzung hat mit ca. 25 % Kohlenhydraten (bezogen auf die trinkfertige Zubereitung), von den der überwiegende Zucker ist, einen Anteil der mir für einen Diätdrink recht hoch erscheint, speziell am Abend.Der Shake enthält laktosefreie Molke und kann daher aus von laktoseintoleranten Personen eingenommen werden.Der Lineavi Shake ist ungeeignet für Leute, die keine süßen Sachen mögen (1 Stern Abzug). Geschmacklich erinnert mich der Shake an übersüßtes Brot, nicht unbedingt mein Favorit, aber trinkbar.Beim ersten Öffnen ist eine Alu-Folie zu entfernen, die die einzelne Dose versiegelt. Beim Abziehen dieser Siegelfolie hat es einen Teil des sehr feinen Pulvers nach Außen gewirbelt und direkt Arbeitsplatte und Kleidung eingesaut… (1 Stern Abzug).Der Shake lässt sich leider nicht in eine herzhafte Geschmacksrichtung abwandeln, aber mit Obst, Gemüse und sonstigen Zutaten zum Smoothie variieren.Kaufempfehlung: ja, für Freunde süßen Geschmacks.3 Sterne===LIEFERUMFANG STARTERPAKET===Eine Dose mit 500 g Pulver (10 Portionen), Meßlöffel, Shake-Becher mit Siebeinsatz, Anweisung zur Zubereitung und zum Ablauf der Diät oder Entgiftung.===PRAXISTEST===Zunächst hab ich mich Belesen vornehmlich auf der Produktpage des Herstellers. Initial wird empfohlen 4-5 Shakes täglich zu konsumieren, je nach Körpergröße. Im Laufe der Diät werden immer mehr Shakes durch ausgewogene Mahlzeiten ersetzt, es sind einige Vorschläge für Mahlzeiten im Begleitheft vorhanden, mehr finden sich auf der Herstellerseite.Die Viskosität ist mit 5 Messlöffeln sehr hoch, mit 4 Messlöffeln finde ich es angenehmer zu trinken.Wem der Geschmack zu süß ist und das Getränk nach einiger Zeit nicht mehr runterkriegt kann mal versuchen Crushed Ice unterzumischen. Das nimmt etwas der Süße.Der Abnehmerfolg lag bei knapp 150 g/Tag in den ersten Tagen.</p>
<p>Rating: 3,0 von 5 Sternen</p>
<p>Valence: positiv (0.093)</p>
<p>Polarity: positiv (1.718)</p>
<hr>
<p>ID: p01_422</p>
<p>Date: 2016-04-12</p>
<p>Title: Ablauf / Geschmack / Effekt</p>
<p>Gamma: 0.757</p>
<p>Review: Da meine Freundin abnehmen möchte, hat Sie den Shake (Starterpaket) ausprobiert und konnte nach ein paar Tagen bereits Erfolge sehen. Ich persönlich hätte nicht gedacht, dass das so gut klappt.### Ablauf:Im Lieferumfang ist eine wirklich sehr gute und verständlich Anleitung enthalten.Kurzfassung: In den ersten Tagen ersetzt man alle Mahlzeiten durch drei Shakes, danach wird die Menge des Shakes reduziert und man kann gewisse Sachen wieder Essen.Da die Menge des benötigen Pulvers von der Körpergröße abhängt, reicht das Starterpaket für ca. 3-4 Tage. Für die Turbo-Diät benötigt man min. 27-30 Shakes. Wenn einem der Shake schmeckt und man weiß man steht die Diät durch, sollte man daher rechtzeitig direkt ein 3er oder 6er Paket nachbestellen.### Geschmack:Mir persönlich hat der Shake gar nicht geschmeckt, meiner Freundin schon. In Worte lässt sich Geschmack immer sehr schlecht fassen. Vergleichbar ist dieser mit „Yokebe Aktivkost Classic“.### Zubereitung:Die Zubereitung geht einfach und schnell. Einfach die empfohlene Menge Pulver in den im Lieferumfang enthaltenen Shaker + kaltes Wasser oder Milch hinzugeben und ordentlich shaken. Das Pulver löst sich sehr gut und recht schnell auf. Sofern man Wasser verwendet, kann man auch einen 1TL Pflanzenöl dazugeben. Hier sollte man ausprobieren was einem am besten geschmeckt. Meine Freundin hat meistens Milch verwendet.### Effekt:Meine Freundin konnte bereits nach den ersten Tagen ein paar Erfolge sehen. Dies liegt vermutlich stark dran, das 3 Shakes nur 630 kcal haben und Ihr Grundbedarf deutlich höher ist. Folge dessen hat Ihr Körper mehr verbraucht als er aufgenommen hat. Da der Shake stark sättigt, hatte Sie kein Hunger in diesen Tagen.Auf eine Angabe von kg verzichte ich hier bewusst, da die Gewichtsreduzierung stark vom Körperbau des Anwenders abhängt. Eine Person mit etwas mehr Körpermasse wird in den ersten Tagen deutlich mehr Gewicht verlieren, als eine Person die bereits ein Normalgewicht hat.### Fazit:Wem der Shake schmeckt und somit die ersten Tage durchhält, der wird auf Dauer sicher den gewünschten Effekt der Gewichtsreduzierung erreichen. Die Kosten ab dem 10. Tag, sind mit ca. EUR 1,70 (beim 3er Paket) für 1 Shake aus meiner Sicht ok.—Ich hoffe meine Rezension ist hilfreich und konnte zur Kaufentscheidung beitragen.Fragen können mir gerne via Kommentar gestellt werden. Mehr über mich in meinem Profil (Klick auf meinen Namen)</p>
<p>Rating: 5,0 von 5 Sternen</p>
<p>Valence: positiv (0.043)</p>
<p>Polarity: positiv (1.099)</p>
<hr>
<p>ID: p01_101</p>
<p>Date: 2019-01-30</p>
<p>Title: +Schmeckt lecker/-Mogelpackung</p>
<p>Gamma: 0.746</p>
<p>Review: Ein Shake der schmeckt, bei Bedarf pürriere ich etwas Obst hinein für noch mehr Geschmack, ist aber kein muss!Die Dose ist allerdings eine ziemlich Mogelpackung nur zu 2/3 gefüllt und da man 50g Pulver pro Drink brauch wird sie auch schnell wieder leer sein!</p>
<p>Rating: 4,0 von 5 Sternen</p>
<p>Valence: positiv (0.032)</p>
<p>Polarity: positiv (0.511)</p>
<hr>
<p>ID: p01_408</p>
<p>Date: 2016-05-29</p>
<p>Title: Geschmack überzeugt</p>
<p>Gamma: 0.744</p>
<p>Review: LINEAVI ist ein Mahlzeitersatz in Puderform, der mit Proteinen, Vitaminen, Minearalstoffen angereichert ist und versprich,, die Fettverbrannung anzuregen. Mit jeder empfohlenen Portion werden rund 200 Kcal aufgenommen, also in der Regel deutlich weniger, als bei einer gängigen Mahlzeit. Im Zusammenhang mit einer Diät können 1-2 Mahlzeiten problemlos mit einer Portion des Diätprodukts ersetzt werden, ohne Mangelerscheinungen hervor zu rufen.LNEAVI schmeckt etwas fruchtig und etwas nach Vanille. Es enthält Soja und eignet sich daher nicht für Menschen mit einer Sojaallergie.Wer vergleichbare Produkte wie z.B. Almased kennt, findet in diesem Produkt eine Alternative, die einem auch nach der ersten Dose noch schmeckt.Wunder bewirkt LINEAVI ebenso wenig wie die anderen Pulver, deren Zusammensetzung angeblich stets auf den neuesten medizinischen Erkenntnissen beruht. Dennoch ist es möglich mit Hilfe dieses Mahlzeitersatzes gesundes Abnehmen zu unterstützen, wenn man sich bewegt und all das beherzigt, was man bei jeder Diät beherzigen sollte.</p>
<p>Rating: 3,0 von 5 Sternen</p>
<p>Valence: positiv (0.045)</p>
<p>Polarity: positiv (1.946)</p>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-54_cb5573f50137dc9df57bfa0f14dc7c81">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_descriptives</span>(gamma_topics[<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Results for gamma_topic_5 
## Check for ambiguous topic assignment for review:
Comments: 
- Highest relative gamma: Is gamma_topic_5 the top topic of the abstract?
- Highest absolute gamma: Is the gamme value for gamma_topic_5 higher than 0.5
 
                       Highest absolute gamma   No  Yes
Highest realtive gamma                                 
No                                            1137    0
Yes                                            151  442

## Basic descriptive statistics

        var                  label   n NA.prc mean   sd   se   md
  gamma_top Highest realtive gamma 593  65.72 0.59 0.14 0.01 0.61
 gamma_main Highest absolute gamma 442  74.45 0.66 0.09 0.00 0.66
            range
  0.6 (0.26-0.86)
 0.37 (0.49-0.86)</code></pre>
</div>
</div>
<div class="cell" data-hash="08-exercise_cache/html/unnamed-chunk-55_14feb5ae5993d2d6907f781a3665c329">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print_output_abstracts</span>(gamma_topics[<span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<hr>
<p>ID: p03_239</p>
<p>Date: 2021-05-27</p>
<p>Title: Geld Verschwendung</p>
<p>Gamma: 0.857</p>
<p>Review: Ich habe es als Ergänzung zur Umstellung der Ernährung um etwas abzunehmen. Leider gar keine Wirkung. Trotz gesunder Ernährung habe ich kein Gramm verloren selbst nach zwei Monaten. Richtig enttäuschend.</p>
<p>Rating: 1,0 von 5 Sternen</p>
<p>Valence: negativ (-0.052)</p>
<p>Polarity: negativ (-0.251)</p>
<hr>
<p>ID: p03_209</p>
<p>Date: 2021-06-16</p>
<p>Title: Keine Änderung eingetreten. Ohne Wirkung.</p>
<p>Gamma: 0.854</p>
<p>Review: Bei mir hat sich gar keine Wirkung eingestellt. Normal gegessen und tägliche Bewegung auf dem Fahrrad. Nichts abgenommen, nichts zugenommen ausser die täglichen Schwankungen. Ist auch kein Appetitzügler, Essen hat immer noch geschmeckt. Die Wünsche nach einer besseren Figur sind auch nicht eingetreten. Der Stoffwechsel hat nicht den Rest gemacht. Hier ist bei vielen wohl Einbildung im Spiel.</p>
<p>Rating: 3,0 von 5 Sternen</p>
<p>Valence: positiv (0.004)</p>
<p>Polarity: positiv (1.099)</p>
<hr>
<p>ID: p03_368</p>
<p>Date: 2020-11-25</p>
<p>Title: KEINE WIRKUNG. ES IST NICHT ZU EMPFEHLEN. Voll enttäuscht.</p>
<p>Gamma: 0.849</p>
<p>Review: Eigentlich war ich von den vielen positiven Rezensionen überzeugt.Rausgeworfenes Geld!Das Zeug hat keine Wirkung!Schauen sie Zweite Foto - steht hergestellt für TALLIN !Bei Allgemeine Produktinformationen steht:Netto-Gewicht 45 Grammund auf dem Verpackung Füllmenge: 28 Gramm geschrieben ….Die Frage ist - ob die Inhaltszusammenfassung stimmt ?Hab die Tabletten eingenommen und nach 2 Wochen ist nichts passiert.NUR rausgeworfenes Geld!Schade …</p>
<p>Rating: 1,0 von 5 Sternen</p>
<p>Valence: negativ (-0.105)</p>
<p>Polarity: negativ (-0.511)</p>
<hr>
<p>ID: p03_201</p>
<p>Date: 2021-06-23</p>
<p>Title: Bringt nichts…Geldverschwendung</p>
<p>Gamma: 0.844</p>
<p>Review: Ich habe das Produkt wegen der vielen positiven Bewertungen bestellt.Ich habe kein Übergewicht, ich wollte lediglich zum Sommer einige Pfunde loswerden. Mein Stoffwechsel sollte angeregt werden, da ich Hashimoto habe. Ich ernähre mich ausgewogen und überwiegend gesund.Meine Packung ist jetzt fast leer. Resonanz: keine Veränderung.Ich werde sie auch noch aufbrauchen, aber erwarte nichts großes.Es ist weder ein Fettburner noch ein Stoffwechsel anreger.Lediglich wird der Appetit ETWAS gezügelt/ doch eher verschoben.Von mir definitiv KEINE Kaufempfehlung.Für das geld habe ich definitiv mehr erwartet.</p>
<p>Rating: 1,0 von 5 Sternen</p>
<p>Valence: negativ (-0.006)</p>
<p>Polarity: negativ (-0.847)</p>
<hr>
<p>ID: p03_360</p>
<p>Date: 2020-12-15</p>
<p>Title: Leider nix gebracht :-(</p>
<p>Gamma: 0.84</p>
<p>Review: Habe nach zwei Wochen trotz Umstellen der Ernährung keinen Erfolg gehabt, Gewicht ist gleich geblieben. Schade.</p>
<p>Rating: 1,0 von 5 Sternen</p>
<p>Valence: negativ (-0.036)</p>
<p>Polarity: negativ (-0.847)</p>
</div>
</div>
</div>
</div>


</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../content/08-text_as_data/08-slides.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Slides</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../content/09-esm-m_path/09-slides.html" class="pagination-link">
        <span class="nav-page-text">Slides</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright 2022, Christoph Adrian</div>   
    <div class="nav-footer-right">This page is built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>